# Agent Docstrings

A command-line tool to auto-generate and update file-level docstrings summarizing classes and functions. Useful for maintaining a high-level overview of your files, especially in projects with code generated or modified by AI assistants.

Supports Python, Kotlin, JavaScript, TypeScript, C#, C++, C, Java, Go, PowerShell, and Delphi.

## Why?

When working in Cursor and similar IDEs, Agents often start reading files from the beginning. And regarding Cursor's behavior during the script's creation, in normal mode, the model reads 250 lines of code per call, and in MAX mode, 750 lines. However, I have projects with files over 1000 lines of code, which are not very appropriate to divide into smaller files. And anyway, Agent still have to call reading tools for each individual file.

At the same time, the Agent can choose from which line to read the file. It can navigate and surf within your repository. The script literally provides the Agent with the table of contents of the current file, so that immediately after the first read, the Agent understands the entire structure and can read the file from a specific line, rather than trying to get to it (while also potentially making mistakes along the way).

In addition to the advantage of quick navigation, the initial docstring also serves as a method to reduce context window usage. For example, if a required method in a 900-line file is on line 856, the Agent will only read lines 1-250 and 856-900, instead of sequentially going to the desired forty lines and filling its context with unnecessary code.

## Safe Operation

**Agent Docstrings safely preserves your existing comments and documentation.** The tool uses unique markers to identify auto-generated content:

```python
"""
--- AUTO-GENERATED DOCSTRING ---
This docstring is automatically generated by Agent Docstrings.
Do not modify this block directly.

Classes/Functions:
  - MyClass (line 15):
    - method1(self, param: str) -> bool (line 16)
    - method2(self) (line 20)
  - Functions:
    - helper_function(data: List[str]) -> Dict[str, int] (line 25)
--- END AUTO-GENERATED DOCSTRING ---
"""
```

-   **✅ Preserves manual comments** - Your existing docstrings and comments remain untouched
-   **✅ Updates only auto-generated content** - Only blocks with the special markers are modified
-   **✅ No conflicts with existing documentation** - Works alongside your manual documentation

## Installation

The tool ~~is~~ _will be_ packaged for PyPI. You can install it using `pip`:

```bash
pip install agent-docstrings
```

_=== TODO: Replace this with the actual package name once published. ===_

## Usage

_I run this tool automatically within code quality check scripts. I plan to publish them in the near future._

Run the tool from your terminal, providing a list of directories you want to process. It will recursively scan for supported file types in those directories.

```bash
agent-docstrings path/to/your/project/src another/path/to/process
```

### Supported Languages

| Language   | Extensions                          | Comment Style      |
| ---------- | ----------------------------------- | ------------------ |
| Python     | `.py`                               | Triple-quote `"""` |
| Kotlin     | `.kt`                               | KDoc `/** */`      |
| JavaScript | `.js`, `.jsx`                       | JSDoc `/** */`     |
| TypeScript | `.ts`, `.tsx`                       | TSDoc `/** */`     |
| C#         | `.cs`                               | Block `/* */`      |
| C++        | `.cpp`, `.cxx`, `.cc`, `.hpp`, `.h` | Block `/* */`      |
| C          | `.c`, `.h`                          | Block `/* */`      |
| Java       | `.java`                             | Javadoc `/** */`   |
| Go         | `.go`                               | Block `/* */`      |
| PowerShell | `.ps1`, `.psm1`                     | Block `<# #>`      |
| Delphi     | `.pas`                              | Block `(* *)`      |

## How It Works

1. **Scans** your codebase for supported file types
2. **Analyzes** the structure of each file to identify classes, methods, and functions
3. **Generates** a table of contents with line numbers for easy navigation
4. **Safely updates** only the auto-generated docstring block, preserving all your manual comments
5. **Maintains** accurate line numbers even after the docstring is inserted

## Example Output

Before (your existing code remains unchanged):

```python
# This is my important comment
class DatabaseManager:
    """This is my manual docstring that will be preserved."""

    def connect(self):
        pass

    def disconnect(self):
        pass

def helper_function():
    """Another manual docstring to preserve."""
    pass
```

After (auto-generated table of contents added at the top):

```python
"""
--- AUTO-GENERATED DOCSTRING ---
This docstring is automatically generated by Agent Docstrings.
Do not modify this block directly.

Classes/Functions:
  - DatabaseManager (line 12):
    - connect(self) (line 15)
    - disconnect(self) (line 18)
  - Functions:
    - helper_function() (line 21)
--- END AUTO-GENERATED DOCSTRING ---
"""
# This is my important comment
class DatabaseManager:
    """This is my manual docstring that will be preserved."""

    def connect(self):
        pass

    def disconnect(self):
        pass

def helper_function():
    """Another manual docstring to preserve."""
    pass
```

## Contributing

This is an open-source project. Contributions are welcome! Please feel free to open an issue or submit a pull request.

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
